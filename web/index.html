<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shirushi - Nostr Protocol Explorer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@400;500;600&family=Geist:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header>
        <div class="logo">
            <span class="logo-text">Shirushi</span>
            <span class="logo-subtitle">Nostr Protocol Explorer</span>
        </div>
        <div class="status">
            <span id="connection-status" class="status-dot disconnected"></span>
            <span id="connection-text">Connecting...</span>
        </div>
    </header>

    <nav class="tabs">
        <button class="tab active" data-tab="relays">Relays</button>
        <button class="tab" data-tab="events">Events</button>
        <button class="tab" data-tab="testing">Testing</button>
        <button class="tab" data-tab="keys">Keys</button>
        <button class="tab" data-tab="console">Console</button>
    </nav>

    <main id="content">
        <!-- Relays Tab -->
        <section id="relays-tab" class="tab-content active">
            <div class="panel">
                <h2>Connected Relays</h2>
                <div id="relay-list" class="relay-grid"></div>
            </div>
            <div class="panel">
                <h3>Add Relay</h3>
                <div class="input-group">
                    <input type="text" id="relay-url" placeholder="wss://relay.example.com">
                    <button id="add-relay-btn" class="btn primary">Connect</button>
                </div>
                <div class="presets">
                    <span>Presets:</span>
                    <button class="btn small" data-preset="popular">Popular</button>
                    <button class="btn small" data-preset="fast">Fast</button>
                    <button class="btn small" data-preset="dvms">DVMs</button>
                    <button class="btn small" data-preset="privacy">Privacy</button>
                </div>
            </div>
        </section>

        <!-- Events Tab -->
        <section id="events-tab" class="tab-content">
            <div class="panel">
                <h2>Event Stream</h2>
                <div class="filters">
                    <input type="number" id="filter-kind" placeholder="Kind (e.g., 1)">
                    <input type="text" id="filter-author" placeholder="Author (npub or hex)">
                    <button id="apply-filter-btn" class="btn primary">Apply</button>
                    <button id="clear-filter-btn" class="btn">Clear</button>
                </div>
                <div class="event-controls">
                    <label>
                        <input type="checkbox" id="auto-scroll" checked>
                        Auto-scroll
                    </label>
                    <button id="clear-events-btn" class="btn small">Clear</button>
                </div>
            </div>
            <div id="event-list" class="event-stream"></div>
        </section>

        <!-- Testing Tab -->
        <section id="testing-tab" class="tab-content">
            <div class="testing-layout">
                <div class="nip-list panel">
                    <h2>NIP Tests</h2>
                    <div id="nip-test-list"></div>
                </div>
                <div class="test-detail panel">
                    <div id="test-form">
                        <p class="hint">Select a NIP from the list to run tests</p>
                    </div>
                    <div id="test-results"></div>
                </div>
            </div>
        </section>

        <!-- Keys Tab -->
        <section id="keys-tab" class="tab-content">
            <div class="panel">
                <h2>Generate Keypair</h2>
                <button id="generate-key-btn" class="btn primary">Generate New Keys</button>
                <div id="keypair-result" class="keypair-display hidden">
                    <div class="key-row">
                        <label>Private Key (nsec):</label>
                        <div class="key-value">
                            <input type="password" id="nsec-value" readonly>
                            <button class="btn small" data-copy="nsec-value">Copy</button>
                            <button class="btn small" id="toggle-nsec">Show</button>
                        </div>
                    </div>
                    <div class="key-row">
                        <label>Public Key (npub):</label>
                        <div class="key-value">
                            <input type="text" id="npub-value" readonly>
                            <button class="btn small" data-copy="npub-value">Copy</button>
                        </div>
                    </div>
                    <div class="key-row">
                        <label>Hex Public Key:</label>
                        <div class="key-value">
                            <input type="text" id="hex-pubkey-value" readonly>
                            <button class="btn small" data-copy="hex-pubkey-value">Copy</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel">
                <h2>Encode / Decode NIP-19</h2>
                <div class="input-group">
                    <input type="text" id="nip19-input" placeholder="npub1..., nsec1..., note1..., or hex">
                    <button id="decode-btn" class="btn">Decode</button>
                </div>
                <div class="encode-options">
                    <span>Encode as:</span>
                    <button class="btn small" data-encode="npub">npub</button>
                    <button class="btn small" data-encode="nsec">nsec</button>
                    <button class="btn small" data-encode="note">note</button>
                </div>
                <div id="nip19-result" class="result-box hidden"></div>
            </div>
        </section>

        <!-- Console Tab -->
        <section id="console-tab" class="tab-content">
            <div class="panel">
                <h2>nak Console</h2>
                <p class="hint">Run nak commands directly</p>
                <div class="console-input">
                    <span class="prompt">$ nak</span>
                    <input type="text" id="nak-command" placeholder="key generate">
                    <button id="run-nak-btn" class="btn primary">Run</button>
                </div>
            </div>
            <div class="panel console-output">
                <h3>Output</h3>
                <pre id="nak-output"></pre>
            </div>
            <div class="panel">
                <h3>History</h3>
                <div id="command-history"></div>
            </div>
        </section>
    </main>

    <script src="/static/app.js"></script>
</body>
</html>
